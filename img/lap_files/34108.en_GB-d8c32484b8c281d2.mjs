"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[34108],{934108:(e,t,i)=>{i.r(t),i.d(t,{WebLinkSurvey:()=>d,default:()=>c});var o=i(667294),r=i(20256),s=i(219308),n=i(909512),l=i(233846),a=i(719311),h=i(785893);function u(e,t,i){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends o.Component{constructor(...e){super(...e),u(this,"state",{flyoutType:""}),u(this,"componentDidUpdate",()=>{this.state.flyoutType&&this.setFlyoutStyle()}),u(this,"logFeedback",e=>{let{pin:t,logContextEvent:i}=this.props,o={pin_is_shop_the_look:t.aggregatedPinData?.isShopTheLook?"1":"0",board_owner_id:t.board?.owner?t.board.owner.entityId:"",pin_recommendation_reason:t.recommendationReason&&{reason:t.recommendationReason.reason},pin_is_promoted:t.isPromoted?"1":"0"};i({view_type:11,view_parameter:195,component:13186,event_type:102,element:e?10615:10616,aux_data:{board_id:t.board?.entityId??"",is_downstream_promoted_pin:t.isDownstreamPromotion?"1":"0",url:t.link||"",pin_id:t.entityId,image_signature:t.imageSignature,is_promoted_pin:t.isPromoted?"1":"0",commerce_data:JSON.stringify(o)},object_id_str:t.entityId})}),u(this,"flyoutParentRef",(0,o.createRef)()),u(this,"handleEgSurveyDismiss",(e,t)=>{this.setState({flyoutType:""}),this.logFeedback(e),t()}),u(this,"handleEgSurveyClick",e=>{this.setState({flyoutType:e})}),u(this,"setFlyoutStyle",()=>{let e=this.flyoutParentRef&&this.flyoutParentRef.current&&this.flyoutParentRef.current.children[0];if(e){e.style.zIndex=`${a.fS}`;let t=e.children[0];t&&(t.style.border="transparent")}})}render(){let e,{imageContainerRef:t,maybeLinkRef:i,legoLinkClickthroughAnchorRef:o}=this.props,{flyoutType:s}=this.state;"maybeLink"===s?e=i:"legoMaybeLink"===s?e=o:"imageContainer"===s&&(e=t);let l={height:this.flyoutParentRef&&this.flyoutParentRef.current&&this.flyoutParentRef.current.children[0]?this.flyoutParentRef.current.children[0].clientHeight:0,width:230},a=e&&e.current?e.current.getBoundingClientRect():null,u=!!a&&((e,t,i)=>{let o=window.innerHeight,r=window.innerWidth-e.width-24-i.right,s=i.left-e.width-24;return!(i.top<8)&&!(o-i.bottom<8)&&!!t&&!!(({right:r,left:s})[t]>0)})(l,"imageContainer"===s?"left":"right",a);return s&&u?(0,h.jsx)(n.a3,{eligibleIds:[501145],placementId:12,children:({complete:t})=>(0,h.jsx)(r.xu,{ref:this.flyoutParentRef,position:"absolute",children:(0,h.jsx)(r.J2,{anchor:e?e.current:null,idealDirection:"imageContainer"===s?"left":"right",onDismiss:()=>{},size:"sm",children:(0,h.jsxs)(r.xu,{padding:4,children:[(0,h.jsx)(r.xv,{weight:"bold",children:this.props.i18n.bt("Is this site useful?", "Is this site useful?", "Ask user about click through link usefulness on a Small Flyout on closeup", undefined, true)}),(0,h.jsx)(r.xv,{children:this.props.i18n.bt("Your feedback helps make Pinterest better.", "Your feedback helps make Pinterest better.", "Ask user about usefulness to improve click through links quality", undefined, true)}),(0,h.jsxs)(r.xu,{direction:"row",display:"flex",marginTop:4,width:"198px",children:[(0,h.jsx)(r.xu,{column:6,marginEnd:1,children:(0,h.jsx)(r.zx,{color:"gray",fullWidth:!0,onClick:()=>this.handleEgSurveyDismiss(!1,t),size:"sm",text:this.props.i18n.bt("No", "No", "Keep it short, shown on a button to indicate whether its helpful or not", undefined, true)})}),(0,h.jsx)(r.xu,{column:6,marginStart:1,children:(0,h.jsx)(r.zx,{color:"gray",fullWidth:!0,onClick:()=>this.handleEgSurveyDismiss(!0,t),size:"sm",text:this.props.i18n.bt("Yes", "Yes", "Keep it short, shown on a button to indicate whether its helpful or not", undefined, true)})})]})]})})})}):""}}let c=(0,o.forwardRef)((e,t)=>{let i=(0,l.ZP)(),o=(0,s.Z)();return(0,h.jsx)(d,{...e,ref:t,i18n:i,logContextEvent:o})})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/34108.en_GB-d8c32484b8c281d2.mjs.map