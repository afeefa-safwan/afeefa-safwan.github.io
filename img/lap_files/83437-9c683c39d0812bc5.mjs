"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[83437],{892534:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupMediaViewerVideoContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoWithVisibility_pin"}],type:"Pin",abstractKey:null};a.hash="62ddfb36b3743d169eb6b4b895055efb";let n=a},183437:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ei});var a,n=i(667294),r=i(973935),o=i(20256),s=i(221384),l=i(727264),d=i(769372),u=i(587062);i(422578);var c=i(278229),h=i(661190),m=i(78039),p=i(468318),g=i(15415),v=i(50865),f=i(628423),b=i(707360),y=i(785893);let w=void 0!==a?a:a=i(892534),x=({pin:e,pinKey:t,video:i,flyoutShareProps:a})=>{let{imgSrc:r}=(0,c.G)(),s=(0,m.Z)(w,t),l=!!e.promoter&&!e.is_downstream_promotion,{isWideVideo:d}=(0,g.Z)((0,v.Z)({pin:e}))||{},u=l&&!e.is_eligible_for_web_closeup,{should_mute:x}=e||{},_=(0,f.Z)(),{previous:C}=(0,p.ou)(),k=0===C.length,Z=i.hls?.width??i?.mp4?.width??0,S=i.hls?.height??i?.mp4?.height??0,P=Z/S,j=(0,n.useMemo)(()=>{if("undefined"==typeof window)return{maxWidth:0,maxHeight:0};let e=Math.min(Math.max(window.innerWidth-32,Z),window.innerWidth-32),t=Math.min(Math.max(window.innerHeight-128,S),window.innerHeight-128);return d?{width:e,height:Math.min(e/P,window.innerHeight-128)}:{height:t,width:Math.min(t*P,window.innerWidth-32)}},[d,Z,S,P]);return(0,y.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginTop:64}},"data-test-id":"media-viewer-video-with-visibility",maxHeight:j.height,maxWidth:j.width,rounding:4,width:"100%",zIndex:new o.H3([b.k]),children:(0,y.jsx)(h.Z,{autoplay:!_,customThumbnail:r,flyoutShareProps:a,isPromoted:l,loop:u,muted:x||k,objectFit:"contain",pinId:e.id,pinKey:s,roundingOverride:4,shouldMute:x,variant:"media-viewer",video:i})})};var _=i(943090);let C=({children:e})=>{let t=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=t.current?.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]');e&&e.length>0&&e[0].focus();let i=t=>{if("Tab"!==t.key||!e||0===e.length)return;let i=e[0],a=e[e.length-1];t.shiftKey?document.activeElement===i&&(a.focus(),t.preventDefault()):document.activeElement===a&&(i.focus(),t.preventDefault())};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[]),(0,y.jsx)(o.xu,{ref:t,children:e})};var k=i(616550),Z=i(670752),S=i(381064),P=i(141031),j=i(797348),I=i(655163),M=i(219308),E=i(516511),T=i(967312),D=i(174646),R=i(810139),U=i(555587);let A=({pin:e})=>{let t=(0,M.Z)(),i=(0,k.k6)(),a=(0,P.Z)({variant:"visual-search"}),{isRTL:r}=(0,D.B)(),{checkExperiment:l}=(0,T.F)(),{executeWithViewTransition:d}=(0,I.Z)({_enableViewTransitions:!0}),{animateShopButton:u,onShopButtonAnimationComplete:c,imageSignature:h}=(0,j.Z)({pinKey:{type:"deprecated",data:e}});(0,R.Z)({name:"PinResource",options:{id:e.id,field_set_key:"detailed",fetch_visual_search_objects:!0}});let m=(0,n.useCallback)(({event:a})=>{t({event_type:101,component:128,element:16269,view_type:675}),a?.stopPropagation(),d(()=>{i.push((0,U.Z)({checkExperiment:l,pinId:e.id,isProductPage:!1,surfaceType:"media-viewer"}))})},[l,d,i,t,e.id]),p=l("media_viewer_visual_search").group,g=l("web_animated_closeup_button_v2").anyEnabled,v=(0,n.useMemo)(()=>"enabled_with_animation"===p||"employees"===p?g?(0,y.jsx)(Z.default,{animateOnMount:!0,dataTestId:"shop-button",icon:"magnifying-glass-sparkle",imageSignature:h,onTap:m,variant:"visual-search"}):(0,y.jsx)(S.default,{animateOnRender:!0,animateShopButton:u,dataTestId:"shop-button",id:e.id,imageSignature:h,onAnimationComplete:c,onButtonClick:m,surfaceType:"media-viewer",variant:"visual-search"}):"enabled"===p?(0,y.jsx)(o.hU,{accessibilityLabel:a,bgColor:"lightGray",icon:"magnifying-glass-sparkle",iconColor:"darkGray",size:"lg"}):null,[p,g,u,h,c,m,e.id,a]);return(0,y.jsx)(o.iP,{onTap:m,children:(0,y.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},left:r,marginBottom:s.Z,marginEnd:s.Z,marginStart:s.Z,position:"absolute",right:!r,zIndex:new o.H3([b.k]),children:(0,y.jsx)(E.Z,{children:v})})})},B=({onZoomIn:e,onZoomOut:t,zoomLevel:i,setZoomLevel:a})=>{let{isRTL:n}=(0,D.B)();return(0,y.jsxs)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{gap:8}},direction:"column",display:"flex",left:n,padding:4,position:"absolute",right:!n,zIndex:new o.H3([b.k]),children:[2===i&&(0,y.jsx)(o.hU,{accessibilityLabel:"Zoom out fully",bgColor:"lightGray",dataTestId:"zoom-out-fully-media-viewer",icon:"minimize",iconColor:"darkGray",onClick:()=>{a(0)},size:"lg"}),(0,y.jsx)(o.hU,{accessibilityLabel:"Zoom in",bgColor:"lightGray",dataTestId:"zoom-in-media-viewer",disabled:2===i,icon:"add",iconColor:"darkGray",onClick:e,size:"lg"}),(0,y.jsx)(o.hU,{accessibilityLabel:"Zoom out",bgColor:"lightGray",dataTestId:"zoom-out-media-viewer",disabled:0===i,icon:"dash",iconColor:"darkGray",onClick:t,size:"lg"})]})};var z=i(313565),H=i(516312),O=i(263383),G=i(624404),L=i(991274),V=i(532896),W=i(740195),q=i(219463),F=i(66709),K=i(259036),Y=i(372312),$=i(882368),X=i(827491),N=i(488879),J=i(460632),Q=i(116965),ee=i(609924);let et=(0,i(757653).Z)(()=>Promise.all([i.e(30932),i.e(40850),i.e(15616),i.e(47442)]).then(i.bind(i,792862)),void 0,e=>792862,"SaveAffordance"),ei=({onClose:e,onImageClick:t,onSaveButtonClick:i,pin:a,rounding:h,showRepinOnInitialRender:m,trafficSource:p,viewParameter:g,flyoutShareProps:v})=>{let f,{isRTL:w}=(0,D.B)(),{carouselInfo:k,mediaViewerImage:Z,video:S}=(0,c.G)(),{clientTrackingParams:P,isCloseupMediaViewerOpen:I,calculatedImageHeight:M}=(0,J.x4)(),E=(0,Y.Z)({type:"deprecated",data:a})(),{link:R,originalImageUrl:U,showProductDetailPage:ei}=(0,j.Z)({pinKey:{type:"deprecated",data:a}}),ea=(0,V.Z)({isHiddenPin:a.is_hidden,isUnsafePin:a.is_unsafe}),[en,er]=(0,n.useState)(k?.carouselData?.index??0);(0,n.useEffect)(()=>{"number"==typeof k?.carouselData?.index&&er(k.carouselData.index)},[k?.carouselData?.index]);let eo=k?.carouselData?.carousel_slots??[],es=eo.length>0,el=es?eo?.[en]?.images?.["736x"]:Z,{peekRedesignFastFollowsEnabled:ed,peekRedesignFastFollowsExpGroup:eu}=(0,O.Z)(el),ec=(0,X.Z)(),eh=(0,$.Z)(),em=(0,N.q6)(eh,a?.pinner?.id,ec),{showEnabledSaveBehavior:ep}=(0,Q.Yh)(!0),{checkExperiment:eg}=(0,T.F)(),{domain:ev}=a,{currentDomain:ef}=(0,z.Z)({carouselData:a.carousel_data&&{carouselSlots:a.carousel_data.carousel_slots&&a.carousel_data.carousel_slots.map(e=>({domain:e.domain,link:e.link})),index:a.carousel_data?.index},domain:a.domain}),eb=ef||ev||"",ey=(0,n.useMemo)(()=>({carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0}),[]);if(k&&k.carouselData&&k.carouselData.id){let{carousel_slots:e=[],id:t,index:i=0}=k.carouselData;f=e[i]&&e[i].link,ey.carousel_slot_id=e[i]&&e[i].id,ey.carousel_data_id=t,ey.carousel_slot_index=i,eb=e[i]&&e[i].domain||eb}let ew=f||R||U||"",{showDomainLinkButton:ex}=(0,d.Z)({carouselInfo:k,disablePinTagButton:!0,domain:eb,isEmployee:eh.isAuth&&!!eh.isEmployee,isScenePin:!1,isCollageEnabled:!1,hasMetTrustAndSafetyCheck:ea,navLink:ew,pinKey:{type:"deprecated",data:a},showProductDetailPage:ei,isORBACProfileManager:em}),{handleZoomIn:e_,handleZoomOut:eC,zoomLevel:ek,setZoomLevel:eZ,translateX:eS,translateY:eP,isPortrait:ej,handleMouseDown:eI,handleMouseMove:eM,handleMouseUpOrLeave:eE,isDragging:eT,isScrolling:eD,handleWheel:eR,initialWidth:eU,initialHeight:eA,imageContainerRef:eB,handleImageLoad:ez,enableAnimation:eH}=(({mainImage:e})=>{let t=(0,n.useRef)(null),[i,a]=(0,n.useState)(0),[r,o]=(0,n.useState)(0),[s,l]=(0,n.useState)(0),[d,u]=(0,n.useState)(!1),[c,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(0),[g,v]=(0,n.useState)(0),[f,b]=(0,n.useState)(null),[y,w]=(0,n.useState)(null),[x,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{0===i&&(o(0),l(0))},[i]);let C=(0,n.useMemo)(()=>!(e?.width&&e?.height)||e.height>=e.width,[e]),k=(0,n.useCallback)((t,a,n=i)=>{if(0===n)return{x:0,y:0};let r=window.innerWidth,o=window.innerHeight,s=r,l=o;if(e?.width&&e?.height){let t=e.height/e.width;C?l=r*t:s=o/t}let d=Math.abs((s*=n)-r)/2,u=s>r?d:0,c=s>r?-d:0,h=Math.abs((l*=n)-o)/2,m=l>o?h:0;return{x:Math.max(c,Math.min(t,u)),y:Math.max(l>o?-h:0,Math.min(a,m))}},[e?.width,e?.height,i,C]),Z=(0,n.useCallback)(()=>{a(e=>{let t=e+1,i=t>2?2:t;if(e>0&&i>0){let t=i/e,{x:a,y:n}=k(r*t,s*t,i);o(a),l(n)}else if(0===i)o(0),l(0);else{let{x:e,y:t}=k(r,s,i);o(e),l(t)}return i}),_(!0)},[r,s,k]),S=(0,n.useCallback)(()=>{a(e=>{let t=e-1,i=t<0?0:t;if(e>0&&i>0){let t=i/e,{x:a,y:n}=k(r*t,s*t,i);o(a),l(n)}else if(0===i)o(0),l(0);else{let{x:e,y:t}=k(r,s,i);o(e),l(t)}return i})},[r,s,k]),P=(0,n.useCallback)(e=>{0!==i&&(u(!0),p(e.clientX-r),v(e.clientY-s))},[i,r,s]),j=(0,n.useCallback)(e=>{if(!d||0===i)return;let{x:t,y:a}=k(e.clientX-m,e.clientY-g);o(t),l(a)},[d,i,m,g,k]),I=(0,n.useCallback)(()=>{u(!1)},[]),M=(0,n.useCallback)(e=>{if(0===i)return;e.preventDefault(),h(!0);let{x:t,y:a}=k(r-e.deltaX,s-e.deltaY);o(t),l(a),setTimeout(()=>{h(!1)},100)},[i,r,s,k]),E=(0,n.useCallback)(()=>{!t.current||0!==i||f||y||(b(t.current.clientWidth),w(t.current.clientHeight))},[f,y,i]);return{handleZoomIn:Z,handleZoomOut:S,zoomLevel:i,setZoomLevel:a,translateX:r,translateY:s,isPortrait:C,handleMouseDown:P,handleMouseMove:j,handleMouseUpOrLeave:I,isDragging:d,handleWheel:M,initialWidth:f,initialHeight:y,handleImageLoad:E,setInitialWidth:b,setInitialHeight:w,isScrolling:c,imageContainerRef:t,enableAnimation:x}})({mainImage:el}),eO=e=>{eZ(0),er(e)},eG=(0,n.useCallback)(({isExitButton:t,isClick:i})=>{eZ(0),e({isExitButton:t,isClick:i})},[e,eZ]),eL=()=>eG({isExitButton:!1,isClick:!0}),eV=()=>eG({isExitButton:!0,isClick:!0}),eW=()=>eG({isExitButton:!1,isClick:!1}),eq=(0,n.useMemo)(()=>es?16+L.g+4:0,[es]),eF=!1;ed&&(eF=(0,_.Z)(eu,el));let eK=(0,n.useMemo)(()=>({transform:`translate(${eS}px, ${eP}px)`,transition:eT||eD||0===eS&&0===eP?"none":"transform 0.2s ease-in-out",pointerEvents:"auto",overflow:"show",position:"relative",width:"max-content",height:"max-content",transformOrigin:"50% 50%"}),[eS,eP,eT,eD]),eY="transform 0.2s ease-in-out, width 0.2s ease-in-out, height 0.2s ease-in-out",e$=(0,n.useMemo)(()=>{let e={transformOrigin:"50% 50%",transition:eY,cursor:0===ek?"default":eT?"grabbing":"grab"};if(0===ek){let t=eU&&eA?{width:eU,height:eA,transition:eH?eY:"none"}:{minHeight:eF?void 0:M,maxHeight:"calc(100vh - 32px)",maxWidth:`calc(100vw - ${32+eq}px)`,transition:"none"};return{...e,...t,borderRadius:`${h}px`,transform:"scale(1)"}}return{...e,transform:`scale(${ek})`,width:ej?"100vw":"100%",height:ej?"100%":"100vh"}},[ek,h,eT,ej,eq,eF,eU,eA,M,eH]),eX=(0,n.useMemo)(()=>(0,y.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},left:!w,marginBottom:s.Z,marginStart:s.Z,position:"absolute",right:w,zIndex:new o.Ry(1e3),children:(0,y.jsx)(l.Z,{auxData:ey,domain:eb,link:ew,onClick:t,pinKey:{type:"deprecated",data:a},trafficSource:p,viewType:675})}),[ey,eb,ew,t,a,p,w]),eN=(0,n.useMemo)(()=>ea&&!em&&!a.is_promoted&&eg("media_viewer_visual_search").anyEnabled,[eg,em,a.is_promoted,ea]),eJ=(0,n.useMemo)(()=>(0,y.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"media-viewer-image",display:"flex",justifyContent:"center",overflow:"hidden",position:"relative",zIndex:b.k,children:[(0,y.jsx)(G.Z,{_enableViewTransitions:!0,type:"image",children:(0,y.jsx)(o.xu,{ref:eB,dangerouslySetInlineStyle:{__style:{...eK}},onMouseDown:eI,onMouseLeave:eE,onMouseMove:eM,onMouseUp:eE,onWheel:eR,children:(0,y.jsx)("img",{alt:"Full view",draggable:"false",loading:"eager",onLoad:ez,src:el?.url,style:e$})})}),0===ek&&ex&&eX,0===ek&&eN&&(0,y.jsx)(A,{pin:a})]}),[el,ex,eX,eI,eM,eE,eR,ek,eK,e$,eB,ez,a,eN]),eQ=document.getElementById(ee.dV);return I&&eQ&&(0,r.createPortal)((0,y.jsx)(K.Z,{auxData:ey,clientTrackingParams:P,view:675,children:({intersectionObserverRef:e})=>(0,y.jsxs)(F.Z,{children:[(0,y.jsx)(C,{children:(0,y.jsxs)(u.Z,{onOutsideClick:eL,children:[S&&(0,y.jsx)(x,{flyoutShareProps:v,pin:a,pinKey:{type:"deprecated",data:a},video:S}),!S&&es&&(0,y.jsx)(o.xu,{left:!0,marginStart:4,position:"absolute",zIndex:new o.H3([b.k]),children:(0,y.jsx)(q.Z,{containerId:"InnerScrollContainer",children:(0,y.jsx)(L.Z,{carouselSlots:k?.carouselData?.carousel_slots??[],commerceData:E,onImageSelect:eO,pinId:a.id,selectedIndex:en,size:"sm",surfaceType:"media-viewer",viewParameter:(0,W.Z)({hasPin:!!a,hasPinRichMetadata:!!a.rich_metadata,hasPinRichMetadataProducts:!!a.rich_metadata?.products,hasPinRichMetadataArticle:!!a.rich_metadata?.article,hasPinRichMetadataRecipe:!!a.rich_metadata?.recipe,hasPinStoryPinData:!!a.story_pin_data})})})}),!S&&eJ,(0,y.jsxs)(o.xu,{ref:e,alignItems:"start",display:"flex",justifyContent:"between",marginTop:4,paddingX:4,position:"absolute",top:!0,width:"100%",zIndex:new o.H3([b.k]),children:[(0,y.jsx)(o.hU,{accessibilityLabel:"Close Modal",bgColor:"washLight",dataTestId:"media-viewer-close",icon:"cancel",iconColor:"darkGray",onClick:eV}),em||0!==ek?null:(0,y.jsx)(et,{boardCount:eh.isAuth?eh.boardCount:0,onClickCallback:i,pin:a,showEnabledSaveBehavior:ep,showRepinOnInitialRender:m,variant:"media-viewer",viewParameter:g,viewType:675})]}),!S&&(0,y.jsx)(B,{onZoomIn:e_,onZoomOut:eC,setZoomLevel:eZ,zoomLevel:ek})]})}),(0,y.jsx)(H.Z,{onClose:eW})]})}),eQ)}},66709:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(667294);class n extends a.Component{constructor(...e){var t,i;super(...e),(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="prevOverflow","string"))?i:i+"")in this?Object.defineProperty(this,t,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[t]=null}componentDidMount(){"undefined"!=typeof window&&(this.prevOverflow=window.document.body.style.overflow,window.document.body.style.overflow="hidden")}componentWillUnmount(){"undefined"!=typeof window&&(window.document.body.style.overflow=this.prevOverflow)}render(){return this.props.children}}},810139:(e,t,i)=>{i.d(t,{Z:()=>r});var a=i(741594),n=i(292643);function r(e){let{enabledRouteRefresh:t,headers:i,name:r,noCache:o,options:s,schema:l}=e??{name:a.fY,options:null},d=!e,{fetchResource:u,ref:c,fetchMore:h,isFetching:m,isLoaded:p,isRefreshing:g,refresh:v}=(0,n.Z)({enabledRouteRefresh:t,headers:i,name:r,noCache:o,options:s,schema:l},d,!1);return d||u(),{ref:c,fetchMore:h,isFetching:m,isLoaded:p,isRefreshing:g,refresh:v}}},259036:(e,t,i)=>{i.d(t,{Z:()=>v});var a=i(667294),n=i(468318),r=i(131714),o=i(174646),s=i(136388),l=i(390124),d=i(726462),u=i(55665),c=i(903683),h=i(785893);function m(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class p extends a.Component{constructor(e){super(e),m(this,"componentWillUnmount",()=>{this.unregisterComponent()}),m(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:i,objectId:a,timeSpentContext:n,view:r,viewParameter:o}=this.props;return{view:r||n?.view,viewParameter:o||n?.viewParameter,component:t||n?.component,element:i,objectId:a||n?.objectId,clientTrackingParams:e||n?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),m(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),m(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e?.getParentUuid?.()}),m(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),m(this,"getTimedPair",()=>this.state.timedPair),m(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),m(this,"isRegistered",!1),m(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),m(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),m(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:i,left:a,right:n,top:r}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===i&&0===a&&0===n&&0===r?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new d.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,s.Z)(e.auxData,this.props.auxData)&&(0,s.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e}=this.props;return(0,h.jsx)(u.$,{value:this.getContext(),children:(0,h.jsx)(r.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:t=>e({intersectionObserverRef:t})})})}}let g=e=>{let t=(0,n.ou)(),i=(0,u.a)(),r=(0,l.Z)(),s=(0,c.EQ)(),{requestIdentifier:d=""}=(0,o.B)(),m={app_instance_id:d.slice(0,8),...e.auxData??{}};return(0,a.useEffect)(()=>{r?.setHistoryStackContext(t)},[t,r]),(0,a.useEffect)(()=>{r?.setPins(s??{})},[s,r]),r?(0,h.jsx)(p,{...e,auxData:m,timeSpentContext:i,timeSpentManager:r,children:({intersectionObserverRef:t})=>e.children({intersectionObserverRef:t})}):(0,h.jsx)(a.Fragment,{children:e.children({intersectionObserverRef:null})})};g.displayName="TimeSpent";let v=g},116965:(e,t,i)=>{i.d(t,{ZP:()=>s,tY:()=>u,Xt:()=>l,$7:()=>c,Yh:()=>d});var a=i(545007),n=i(967312),r=i(113474),o=i(882368);function s(e){let t=(0,o.Z)(),i=t.isAuth&&t.id===e,{checkExperiment:a}=(0,n.F)(),s=(0,r.Z)(!t.isAuth||i?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:i&&t.has_quicksave_board||!!(t.isAuth&&(s??{}).data?.has_quicksave_board)||(i||t.isAuth)&&!t.has_quicksave_board&&!(s??{}).data?.has_quicksave_board&&a("profile_saves_for_all").anyEnabled}}function l(e){let t=(0,o.Z)(),i=t.isAuth&&t.id===e,a=(0,r.Z)(!t.isAuth||i?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{boardlessPinsEnabled:i&&t.has_quicksave_board||!!(t.isAuth&&(a??{}).data?.has_quicksave_board)}}function d(e){let t=(0,a.I0)(),i=(0,o.Z)(),n=i.isAuth&&"number"==typeof i.boardCount&&i.boardCount<5&&e,s=(0,r.Z)(n&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:i.isAuth&&i.id}}:null);return i.isAuth&&void 0===i.save_behavior&&s&&s.data?.id&&t({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:s.data.save_behavior}}),{showEnabledSaveBehavior:n}}function u(e){let t,i=(0,o.Z)();return i.isAuth&&e&&(0===i.save_behavior?t={type:"classic"}:1===i.save_behavior&&(t={type:"inline"})),{saveBehaviorType:t}}function c(){let e=(0,o.Z)();return e.isAuth&&(e?.secretBoardCount??0)>0}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/83437-9c683c39d0812bc5.mjs.map